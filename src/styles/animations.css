/* Animations and Keyframes */

@keyframes borderGlow {
  0% { opacity: 0.6; }
  100% { opacity: 0.9; }
}

@keyframes gridPulse {
  0% { 
    background-size: 
      100px 100px,
      100px 100px,
      50px 50px,
      50px 50px,
      100% 100%,
      100% 100%;
  }
  100% { 
    background-size: 
      120px 120px,
      120px 120px,
      60px 60px,
      60px 60px,
      100% 100%,
      100% 100%;
  }
}

@keyframes titlePulse {
  0%, 100% { 
    text-shadow: 
      0 0 15px rgba(255, 255, 255, 0.3),
      0 0 25px rgba(0, 200, 255, 0.3);
  }
  50% { 
    text-shadow: 
      0 0 25px rgba(255, 255, 255, 0.6),
      0 0 40px rgba(0, 200, 255, 0.6);
  }
}

@keyframes titlePulseRed {
  0%, 100% { 
    text-shadow: 
      0 0 15px rgba(255, 255, 255, 0.3),
      0 0 25px rgba(255, 50, 80, 0.6);
  }
  50% { 
    text-shadow: 
      0 0 25px rgba(255, 255, 255, 0.6),
      0 0 40px rgba(255, 50, 80, 0.9);
  }
}

@keyframes titlePulseBlue {
  0%, 100% { 
    text-shadow: 
      0 0 15px rgba(255, 255, 255, 0.3),
      0 0 25px rgba(0, 200, 255, 0.6);
  }
  50% { 
    text-shadow: 
      0 0 25px rgba(255, 255, 255, 0.6),
      0 0 40px rgba(0, 200, 255, 0.9);
  }
}

@keyframes textFlow {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes textShimmer {
  0% { background-position: -100% 0; }
  100% { background-position: 100% 0; }
}

@keyframes currentPlayerGlow {
  0%, 100% { 
    border-color: rgba(0, 200, 255, 0.3);
    box-shadow: 
      0 0 20px rgba(0, 200, 255, 0.4),
      0 0 40px rgba(0, 200, 255, 0.2),
      inset 0 0 20px rgba(0, 200, 255, 0.1);
  }
  50% { 
    border-color: rgba(0, 200, 255, 0.6);
    box-shadow: 
      0 0 30px rgba(0, 200, 255, 0.6),
      0 0 60px rgba(0, 200, 255, 0.4),
      inset 0 0 30px rgba(0, 200, 255, 0.2);
  }
}

@keyframes currentPlayerGlowRed {
  0%, 100% { 
    border-color: rgba(255, 50, 80, 0.6);
    box-shadow: 
      0 0 20px rgba(255, 50, 80, 0.4),
      0 0 40px rgba(255, 50, 80, 0.2),
      inset 0 0 20px rgba(255, 50, 80, 0.1);
  }
  50% { 
    border-color: rgba(255, 50, 80, 0.9);
    box-shadow: 
      0 0 30px rgba(255, 50, 80, 0.6),
      0 0 60px rgba(255, 50, 80, 0.4),
      inset 0 0 30px rgba(255, 50, 80, 0.2);
  }
}

@keyframes currentPlayerGlowBlue {
  0%, 100% { 
    border-color: rgba(0, 200, 255, 0.6);
    box-shadow: 
      0 0 20px rgba(0, 200, 255, 0.4),
      0 0 40px rgba(0, 200, 255, 0.2),
      inset 0 0 20px rgba(0, 200, 255, 0.1);
  }
  50% { 
    border-color: rgba(0, 200, 255, 0.9);
    box-shadow: 
      0 0 30px rgba(0, 200, 255, 0.6),
      0 0 60px rgba(0, 200, 255, 0.4),
      inset 0 0 30px rgba(0, 200, 255, 0.2);
  }
}

@keyframes currentPlayerHalo {
  0%, 100% { opacity: 0.6; filter: blur(8px); }
  50% { opacity: 0.9; filter: blur(12px); }
}

@keyframes boardGlow {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

@keyframes activeGlow {
  0%, 100% { 
    box-shadow: 
      0 0 0 4px #00c8ff,
      0 0 40px rgba(0, 200, 255, 0.7),
      0 0 80px rgba(0, 200, 255, 0.4),
      inset 0 0 40px rgba(0, 200, 255, 0.15),
      0 10px 30px rgba(0, 0, 0, 0.8);
  }
  50% { 
    box-shadow: 
      0 0 0 6px #00c8ff,
      0 0 60px rgba(0, 200, 255, 0.9),
      0 0 120px rgba(0, 200, 255, 0.6),
      inset 0 0 60px rgba(0, 200, 255, 0.25),
      0 15px 40px rgba(0, 0, 0, 0.9);
  }
}

@keyframes activeGlowRed {
  0%, 100% { 
    box-shadow: 
      0 0 0 4px #ff3250,
      0 0 40px rgba(255, 50, 80, 0.7),
      0 0 80px rgba(255, 50, 80, 0.4),
      inset 0 0 40px rgba(255, 50, 80, 0.15),
      0 10px 30px rgba(0, 0, 0, 0.8);
  }
  50% { 
    box-shadow: 
      0 0 0 6px #ff3250,
      0 0 60px rgba(255, 50, 80, 0.9),
      0 0 120px rgba(255, 50, 80, 0.6),
      inset 0 0 60px rgba(255, 50, 80, 0.25),
      0 15px 40px rgba(0, 0, 0, 0.9);
  }
}

@keyframes activeGlowBlue {
  0%, 100% { 
    box-shadow: 
      0 0 0 4px #00c8ff,
      0 0 40px rgba(0, 200, 255, 0.7),
      0 0 80px rgba(0, 200, 255, 0.4),
      inset 0 0 40px rgba(0, 200, 255, 0.15),
      0 10px 30px rgba(0, 0, 0, 0.8);
  }
  50% { 
    box-shadow: 
      0 0 0 6px #00c8ff,
      0 0 60px rgba(0, 200, 255, 0.9),
      0 0 120px rgba(0, 200, 255, 0.6),
      inset 0 0 60px rgba(0, 200, 255, 0.25),
      0 15px 40px rgba(0, 0, 0, 0.9);
  }
}

@keyframes activeBoardGlow {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.7; }
}

@keyframes boardWin {
  0% {
    transform: scale(1) rotate(0deg);
    filter: brightness(1) saturate(1);
  }
  25% {
    transform: scale(1.05) rotate(1deg);
    filter: brightness(1.2) saturate(1.3);
  }
  50% {
    transform: scale(1.1) rotate(0deg);
    filter: brightness(1.4) saturate(1.6);
  }
  75% {
    transform: scale(1.05) rotate(-1deg);
    filter: brightness(1.2) saturate(1.3);
  }
  100% {
    transform: scale(1) rotate(0deg);
    filter: brightness(1) saturate(1);
  }
}

@keyframes boardWinRed {
  0% {
    box-shadow: 
      0 0 0 6px #ff3250,
      0 0 60px rgba(255, 50, 80, 0.8),
      0 0 120px rgba(255, 50, 80, 0.5),
      0 0 180px rgba(255, 50, 80, 0.3),
      inset 0 0 60px rgba(255, 50, 80, 0.2),
      0 20px 50px rgba(0, 0, 0, 0.9);
    background: rgba(255, 50, 80, 0.15);
  }
  25% {
    box-shadow: 
      0 0 0 8px #ff3250,
      0 0 80px rgba(255, 50, 80, 1),
      0 0 160px rgba(255, 50, 80, 0.7),
      0 0 240px rgba(255, 50, 80, 0.4),
      inset 0 0 80px rgba(255, 50, 80, 0.3),
      0 25px 60px rgba(0, 0, 0, 0.9);
    background: rgba(255, 50, 80, 0.25);
  }
  50% {
    box-shadow: 
      0 0 0 10px #ff3250,
      0 0 100px rgba(255, 50, 80, 1.2),
      0 0 200px rgba(255, 50, 80, 0.9),
      0 0 300px rgba(255, 50, 80, 0.5),
      inset 0 0 100px rgba(255, 50, 80, 0.4),
      0 30px 70px rgba(0, 0, 0, 0.9);
    background: rgba(255, 50, 80, 0.35);
  }
  75% {
    box-shadow: 
      0 0 0 8px #ff3250,
      0 0 80px rgba(255, 50, 80, 1),
      0 0 160px rgba(255, 50, 80, 0.7),
      0 0 240px rgba(255, 50, 80, 0.4),
      inset 0 0 80px rgba(255, 50, 80, 0.3),
      0 25px 60px rgba(0, 0, 0, 0.9);
    background: rgba(255, 50, 80, 0.25);
  }
  100% {
    box-shadow: 
      0 0 0 6px #ff3250,
      0 0 60px rgba(255, 50, 80, 0.8),
      0 0 120px rgba(255, 50, 80, 0.5),
      0 0 180px rgba(255, 50, 80, 0.3),
      inset 0 0 60px rgba(255, 50, 80, 0.2),
      0 20px 50px rgba(0, 0, 0, 0.9);
    background: rgba(255, 50, 80, 0.15);
  }
}

@keyframes boardWinBlue {
  0% {
    box-shadow: 
      0 0 0 6px #00c8ff,
      0 0 60px rgba(0, 200, 255, 0.8),
      0 0 120px rgba(0, 200, 255, 0.5),
      0 0 180px rgba(0, 200, 255, 0.3),
      inset 0 0 60px rgba(0, 200, 255, 0.2),
      0 20px 50px rgba(0, 0, 0, 0.9);
    background: rgba(0, 200, 255, 0.15);
  }
  25% {
    box-shadow: 
      0 0 0 8px #00c8ff,
      0 0 80px rgba(0, 200, 255, 1),
      0 0 160px rgba(0, 200, 255, 0.7),
      0 0 240px rgba(0, 200, 255, 0.4),
      inset 0 0 80px rgba(0, 200, 255, 0.3),
      0 25px 60px rgba(0, 0, 0, 0.9);
    background: rgba(0, 200, 255, 0.25);
  }
  50% {
    box-shadow: 
      0 0 0 10px #00c8ff,
      0 0 100px rgba(0, 200, 255, 1.2),
      0 0 200px rgba(0, 200, 255, 0.9),
      0 0 300px rgba(0, 200, 255, 0.5),
      inset 0 0 100px rgba(0, 200, 255, 0.4),
      0 30px 70px rgba(0, 0, 0, 0.9);
    background: rgba(0, 200, 255, 0.35);
  }
  75% {
    box-shadow: 
      0 0 0 8px #00c8ff,
      0 0 80px rgba(0, 200, 255, 1),
      0 0 160px rgba(0, 200, 255, 0.7),
      0 0 240px rgba(0, 200, 255, 0.4),
      inset 0 0 80px rgba(0, 200, 255, 0.3),
      0 25px 60px rgba(0, 0, 0, 0.9);
    background: rgba(0, 200, 255, 0.25);
  }
  100% {
    box-shadow: 
      0 0 0 6px #00c8ff,
      0 0 60px rgba(0, 200, 255, 0.8),
      0 0 120px rgba(0, 200, 255, 0.5),
      0 0 180px rgba(0, 200, 255, 0.3),
      inset 0 0 60px rgba(0, 200, 255, 0.2),
      0 20px 50px rgba(0, 0, 0, 0.9);
    background: rgba(0, 200, 255, 0.15);
  }
}

@keyframes boardWinTie {
  0%, 100% { 
    box-shadow: 
      0 0 0 4px #888,
      0 0 40px rgba(150, 150, 150, 0.6),
      0 0 80px rgba(150, 150, 150, 0.3),
      inset 0 0 40px rgba(150, 150, 150, 0.1);
    background: rgba(150, 150, 150, 0.1);
  }
  50% { 
    box-shadow: 
      0 0 0 6px #aaa,
      0 0 60px rgba(150, 150, 150, 0.8),
      0 0 120px rgba(150, 150, 150, 0.5),
      inset 0 0 60px rgba(150, 150, 150, 0.2);
    background: rgba(150, 150, 150, 0.2);
  }
}

@keyframes cellHover {
  0% {
    transform: scale(1);
    background: transparent;
    box-shadow: none;
  }
  50% {
    transform: scale(1.05);
    background: rgba(0, 200, 255, 0.1);
    box-shadow: 
      0 0 20px rgba(0, 200, 255, 0.3),
      inset 0 0 15px rgba(0, 200, 255, 0.1);
  }
  100% {
    transform: scale(1);
    background: transparent;
    box-shadow: none;
  }
}

@keyframes cellHoverRed {
  0% {
    transform: scale(1);
    background: transparent;
    box-shadow: none;
  }
  50% {
    transform: scale(1.05);
    background: rgba(255, 50, 80, 0.1);
    box-shadow: 
      0 0 20px rgba(255, 50, 80, 0.3),
      inset 0 0 15px rgba(255, 50, 80, 0.1);
  }
  100% {
    transform: scale(1);
    background: transparent;
    box-shadow: none;
  }
}

@keyframes cellHoverBlue {
  0% {
    transform: scale(1);
    background: transparent;
    box-shadow: none;
  }
  50% {
    transform: scale(1.05);
    background: rgba(0, 200, 255, 0.1);
    box-shadow: 
      0 0 20px rgba(0, 200, 255, 0.3),
      inset 0 0 15px rgba(0, 200, 255, 0.1);
  }
  100% {
    transform: scale(1);
    background: transparent;
    box-shadow: none;
  }
}

@keyframes winnerAppear {
  0% {
    opacity: 0;
    transform: scale(0.5) rotate(-180deg);
    filter: blur(10px);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.1) rotate(0deg);
    filter: blur(2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
    filter: blur(0px);
  }
}

@keyframes winnerGlow {
  0%, 100% { filter: brightness(1) saturate(1); }
  50% { filter: brightness(1.3) saturate(1.5); }
}

@keyframes winnerGlowRed {
  0%, 100% { 
    text-shadow: 0 0 20px rgba(255, 50, 80, 0.8);
  }
  50% { 
    text-shadow: 
      0 0 30px rgba(255, 50, 80, 1),
      0 0 60px rgba(255, 50, 80, 0.6);
  }
}

@keyframes winnerGlowBlue {
  0%, 100% { 
    text-shadow: 0 0 20px rgba(0, 200, 255, 0.8);
  }
  50% { 
    text-shadow: 
      0 0 30px rgba(0, 200, 255, 1),
      0 0 60px rgba(0, 200, 255, 0.6);
  }
}

@keyframes buttonGlow {
  0% { 
    filter: blur(5px);
    opacity: 0.6;
  }
  100% { 
    filter: blur(10px);
    opacity: 0.9;
  }
}

@keyframes buttonGlowRed {
  0% { 
    filter: blur(8px);
    opacity: 0.5;
  }
  100% { 
    filter: blur(15px);
    opacity: 0.8;
  }
}

/* Timer Animations */
@keyframes activePulse {
  0% { 
    transform: scale(1.05);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.06);
    filter: brightness(1.05);
  }
  100% { 
    transform: scale(1.05);
    filter: brightness(1);
  }
}

@keyframes textGlow {
  0% { 
    opacity: 0.95;
    text-shadow: 0 0 6px currentColor;
  }
  100% { 
    opacity: 1;
    text-shadow: 0 0 8px currentColor, 0 0 12px currentColor;
  }
}

@keyframes valueGlow {
  0% { 
    transform: scale(1);
    text-shadow: 0 0 15px currentColor;
  }
  100% { 
    transform: scale(1.01);
    text-shadow: 0 0 12px currentColor, 0 0 18px currentColor;
  }
}

@keyframes timerWarning {
  0% { opacity: 1; }
  100% { opacity: 0.7; }
}

@keyframes timerCritical {
  0% { 
    opacity: 1;
    transform: scale(1);
  }
  100% { 
    opacity: 0.8;
    transform: scale(1.05);
  }
}

/* Rules Animations */
@keyframes arrowPulse {
  0% { 
    opacity: 0.7;
    transform: scale(1);
  }
  100% { 
    opacity: 1;
    transform: scale(1.1);
  }
}

/* Subtitle Animation */
@keyframes subtitleGlow {
  0% { 
    opacity: 0.7;
    text-shadow: 
      0 0 8px rgba(255, 255, 255, 0.3),
      0 0 15px rgba(0, 200, 255, 0.3),
      0 0 25px rgba(0, 200, 255, 0.1);
  }
  100% { 
    opacity: 0.9;
    text-shadow: 
      0 0 10px rgba(255, 255, 255, 0.4),
      0 0 20px rgba(0, 200, 255, 0.5),
      0 0 30px rgba(0, 200, 255, 0.3);
  }
}

/* Start Menu Border Animation */
@keyframes menuBorderGlow {
  0% { 
    opacity: 0.6;
    background: linear-gradient(45deg, 
      rgba(0, 200, 255, 0.3), 
      rgba(255, 50, 80, 0.2), 
      rgba(0, 200, 255, 0.3), 
      rgba(255, 50, 80, 0.15));
  }
  100% { 
    opacity: 1;
    background: linear-gradient(45deg, 
      rgba(0, 200, 255, 0.5), 
      rgba(255, 50, 80, 0.4), 
      rgba(0, 200, 255, 0.5), 
      rgba(255, 50, 80, 0.3));
  }
}

/* Winner Container Animations */
@keyframes winnerPulse {
  0% { 
    transform: scale(1);
    filter: brightness(1) saturate(1);
  }
  50% {
    transform: scale(1.02);
    filter: brightness(1.15) saturate(1.3);
  }
  100% { 
    transform: scale(1);
    filter: brightness(1) saturate(1);
  }
}

@keyframes tieWinnerPulse {
  0% { 
    transform: scale(1);
    filter: brightness(1) saturate(0.8);
  }
  50% {
    transform: scale(1.01);
    filter: brightness(1.1) saturate(1);
  }
  100% { 
    transform: scale(1);
    filter: brightness(1) saturate(0.8);
  }
}

@keyframes winnerBorderGlow {
  0% { 
    opacity: 0.8;
    filter: blur(15px);
  }
  100% { 
    opacity: 1;
    filter: blur(20px);
  }
}

@keyframes tieBorderGlow {
  0% { 
    opacity: 0.6;
    filter: blur(12px);
  }
  100% { 
    opacity: 0.9;
    filter: blur(18px);
  }
}

@keyframes winnerStatusGlow {
  0% { 
    filter: brightness(1) saturate(1);
    text-shadow: 0 0 15px currentColor;
  }
  100% { 
    filter: brightness(1.2) saturate(1.4);
    text-shadow: 0 0 25px currentColor, 0 0 40px currentColor;
  }
}

/* Reduced Motion and Performance Mode Overrides */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
}

/* Perf-low mode: lower intensity and disable large blurs/scales */
body.perf-low {
  /* Disable non-essential animations */
  --pulse-scale: 1.0;
}

body.perf-low .game-container,
body.perf-low .super-board,
body.perf-low .small-board,
body.perf-low .cell,
body.perf-low .timer,
body.perf-low .game-title,
body.perf-low .rules,
body.perf-low .button {
  animation: none !important;
}

body.perf-low .cell,
body.perf-low .small-board,
body.perf-low .super-board,
body.perf-low .game-container {
  box-shadow: 0 0 0 2px rgba(0,0,0,0.2) !important;
  filter: none !important;
}

body.perf-low .game-title,
body.perf-low .rules-title,
body.perf-low .timer .time-value,
body.perf-low .timer .time-label {
  text-shadow: none !important;
}
